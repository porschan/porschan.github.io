<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="proschan,710437653@qq.com"><title>frp初使用 · chanchifeng</title><meta name="description" content="chanchfieng.com"><meta name="keywords" content="Hexo,HTML,CSS,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">chanchifeng</a></h3></div></div><ul class="social-links"></ul><div class="footer"></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>frp初使用</a></h3></div><div class="post-content"><h2 id="先starfatedier-frp，再开工。"><a href="#先starfatedier-frp，再开工。" class="headerlink" title="先starfatedier/frp，再开工。"></a>先star<a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">fatedier/frp</a>，再开工。</h2><h2 id="什么是frp"><a href="#什么是frp" class="headerlink" title="什么是frp?"></a>什么是frp?</h2><h2 id="frp-is-a-fast-reverse-proxy-to-help-you-expose-a-local-server-behind-a-NAT-or-firewall-to-the-internet-Now-it-supports-tcp-udp-http-and-https-protocol-when-requests-can-be-forwarded-by-domains-to-backward-web-services"><a href="#frp-is-a-fast-reverse-proxy-to-help-you-expose-a-local-server-behind-a-NAT-or-firewall-to-the-internet-Now-it-supports-tcp-udp-http-and-https-protocol-when-requests-can-be-forwarded-by-domains-to-backward-web-services" class="headerlink" title="frp is a fast reverse proxy to help you expose a local server behind a NAT or firewall to the internet. Now, it supports tcp, udp, http and https protocol when requests can be forwarded by domains to backward web services."></a>frp is a fast reverse proxy to help you expose a local server behind a NAT or firewall to the internet. Now, it supports tcp, udp, http and https protocol when requests can be forwarded by domains to backward web services.</h2><h3 id="先看看中文文档"><a href="#先看看中文文档" class="headerlink" title="先看看中文文档"></a>先看看<a href="https://github.com/fatedier/frp/blob/master/README_zh.md" target="_blank" rel="noopener">中文文档</a></h3><h3 id="看完了，你要检查一下，你是否有公网IP的服务器一台，测试的电脑一台，如果符合这2个条件请往下看。"><a href="#看完了，你要检查一下，你是否有公网IP的服务器一台，测试的电脑一台，如果符合这2个条件请往下看。" class="headerlink" title="看完了，你要检查一下，你是否有公网IP的服务器一台，测试的电脑一台，如果符合这2个条件请往下看。"></a>看完了，你要检查一下，你是否有公网IP的服务器一台，测试的电脑一台，如果符合这2个条件请往下看。</h3><h3 id="先下载Releases-我电脑用的是windows系统-服务器是linux系统，所以下载了frp-0-20-0-windows-amd64-zip和frp-0-20-0-linux-amd64-tar-gz文件。"><a href="#先下载Releases-我电脑用的是windows系统-服务器是linux系统，所以下载了frp-0-20-0-windows-amd64-zip和frp-0-20-0-linux-amd64-tar-gz文件。" class="headerlink" title="先下载Releases,我电脑用的是windows系统,服务器是linux系统，所以下载了frp_0.20.0_windows_amd64.zip和frp_0.20.0_linux_amd64.tar.gz文件。"></a>先下载<a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">Releases</a>,我电脑用的是windows系统,服务器是linux系统，所以下载了frp_0.20.0_windows_amd64.zip和frp_0.20.0_linux_amd64.tar.gz文件。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">把frp_0.20.0_linux_amd64.tar.gz弄到服务器中,这里我把文件放到/usr/local/frp：</span><br><span class="line"></span><br><span class="line">tar -zxvf frp_0.20.0_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line">cd frp_0.20.0_linux_amd64</span><br><span class="line"></span><br><span class="line">root@porschan:/usr/local/frp/frp_0.20.0_linux_amd64# sudo vi frps.ini</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">bind_port = 7000</span><br><span class="line"></span><br><span class="line">vhost_http_port = 8080</span><br><span class="line"></span><br><span class="line">dashboard_port = 7500</span><br><span class="line">dashboard_user = DUSER_DUSER</span><br><span class="line">dashboard_pwd = DPWD_DPWD</span><br><span class="line"></span><br><span class="line">token = TOKEN_TOKEN</span><br><span class="line"></span><br><span class="line">subdomain_host = chanchifeng.com</span><br></pre></td></tr></table></figure>
<h4 id="这里DUSER-DUSER为仪表台的账号，dashboard-pwd为仪表台的密码，TOKEN-TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，subdomain-host为一级域名，此处是chanchifeng-com）"><a href="#这里DUSER-DUSER为仪表台的账号，dashboard-pwd为仪表台的密码，TOKEN-TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，subdomain-host为一级域名，此处是chanchifeng-com）" class="headerlink" title="这里DUSER_DUSER为仪表台的账号，dashboard_pwd为仪表台的密码，TOKEN_TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，subdomain_host为一级域名，此处是chanchifeng.com）"></a>这里DUSER_DUSER为仪表台的账号，dashboard_pwd为仪表台的密码，TOKEN_TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，subdomain_host为一级域名，此处是chanchifeng.com）</h4><h3 id="重要！重要！重要！需要防火墙允许7000-7500，8080端口访问"><a href="#重要！重要！重要！需要防火墙允许7000-7500，8080端口访问" class="headerlink" title="重要！重要！重要！需要防火墙允许7000,7500，8080端口访问"></a>重要！重要！重要！需要防火墙允许7000,7500，8080端口访问</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo ufw allow 7000</span><br><span class="line">sudo ufw allow 7500</span><br><span class="line">sudo ufw allow 8080端口访问</span><br></pre></td></tr></table></figure>
<h3 id="重要！重要！重要！还要在服务器商家确认是否需要添加安全组，我的是阿里云，需要上面的端口！"><a href="#重要！重要！重要！还要在服务器商家确认是否需要添加安全组，我的是阿里云，需要上面的端口！" class="headerlink" title="重要！重要！重要！还要在服务器商家确认是否需要添加安全组，我的是阿里云，需要上面的端口！"></a>重要！重要！重要！还要在服务器商家确认是否需要添加安全组，我的是阿里云，需要上面的端口！</h3><h3 id="以chanchifeng-com域名为例子：DNS域名解析需要-chanchifeng-com-解析上。"><a href="#以chanchifeng-com域名为例子：DNS域名解析需要-chanchifeng-com-解析上。" class="headerlink" title="以chanchifeng.com域名为例子：DNS域名解析需要 *.chanchifeng.com 解析上。"></a>以chanchifeng.com域名为例子：DNS域名解析需要 *.chanchifeng.com 解析上。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">把frp_0.20.0_windows_amd64.zip弄到测试电脑中，并解压：</span><br><span class="line"></span><br><span class="line">修改frpc.ini：</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">server_addr = SADDR_SADDR</span><br><span class="line">server_port = 7000</span><br><span class="line">token = TOKEN_TOKEN</span><br><span class="line"></span><br><span class="line">[porschan-web]</span><br><span class="line"></span><br><span class="line"># $type://$subdomain.chanchifeng.com:$local_port</span><br><span class="line">#	e.g. http://porschan.chanchifeng.com:8080/</span><br><span class="line"></span><br><span class="line">type = http</span><br><span class="line">local_port = 8080</span><br><span class="line">subdomain = porschan</span><br><span class="line"></span><br><span class="line"># 通过密码保护你的 web 服务</span><br><span class="line">http_user = abc</span><br><span class="line">http_pwd = abc</span><br></pre></td></tr></table></figure>
<h4 id="这里SADDR-SADDR为服务器的公网IP，TOKEN-TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，local-port为你测试电脑下面的端口，subdomain为其二级域名，访问路径为-type-subdomain-chanchifeng-com-local-port，则http-porschan-chanchifeng-com-8080-，这里我测试使用tomcat。"><a href="#这里SADDR-SADDR为服务器的公网IP，TOKEN-TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，local-port为你测试电脑下面的端口，subdomain为其二级域名，访问路径为-type-subdomain-chanchifeng-com-local-port，则http-porschan-chanchifeng-com-8080-，这里我测试使用tomcat。" class="headerlink" title="这里SADDR_SADDR为服务器的公网IP，TOKEN_TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，local_port为你测试电脑下面的端口，subdomain为其二级域名，访问路径为$type://$subdomain.chanchifeng.com:$local_port，则http://porschan.chanchifeng.com:8080/，这里我测试使用tomcat。"></a>这里SADDR_SADDR为服务器的公网IP，TOKEN_TOKEN为frp凭票（若填写，则frpc中需要填写正确，才能正确连接，可删除，local_port为你测试电脑下面的端口，subdomain为其二级域名，访问路径为$type://$subdomain.chanchifeng.com:$local_port，则<a href="http://porschan.chanchifeng.com:8080/" target="_blank" rel="noopener">http://porschan.chanchifeng.com:8080/</a>，这里我测试使用tomcat。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">服务器启动：</span><br><span class="line"></span><br><span class="line">root@porschan:/usr/local/frp/frp_0.20.0_linux_amd64# ./frps -c ./frps.ini </span><br><span class="line">2018/06/15 00:57:14 [I] [service.go:128] frps tcp listen on 0.0.0.0:7000</span><br><span class="line">2018/06/15 00:57:14 [I] [service.go:161] http service listen on 0.0.0.0:8080</span><br><span class="line">2018/06/15 00:57:14 [I] [service.go:205] Dashboard listen on 0.0.0.0:7500</span><br><span class="line">2018/06/15 00:57:14 [I] [root.go:190] Start frps success</span><br><span class="line"></span><br><span class="line">客户端启动：</span><br><span class="line"></span><br><span class="line">PS C:\Users\chan\Desktop\frp\frp_0.20.0_windows_amd64&gt; .\frpc -c .\frpc.ini</span><br><span class="line">2018/06/15 00:57:42 [I] [proxy_manager.go:300] proxy removed: []</span><br><span class="line">2018/06/15 00:57:42 [I] [proxy_manager.go:310] proxy added: [porschan-web]</span><br><span class="line">2018/06/15 00:57:42 [I] [proxy_manager.go:333] visitor removed: []</span><br><span class="line">2018/06/15 00:57:42 [I] [proxy_manager.go:342] visitor added: []</span><br><span class="line">2018/06/15 00:57:42 [I] [control.go:246] [720bc9bba0978b63] login to server success, get run id [720bc9bba0978b63], server udp port [0]</span><br><span class="line">2018/06/15 00:57:42 [I] [control.go:169] [720bc9bba0978b63] [porschan-web] start proxy success</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">启动完成后，客户端会出现如下：</span><br><span class="line"></span><br><span class="line">2018/06/15 00:57:44 [I] [service.go:305] client login info: ip [14.213.158.103:7797] version [0.20.0] hostname [] os [windows] arch [amd64]</span><br><span class="line">2018/06/15 00:57:44 [I] [proxy.go:291] [720bc9bba0978b63] [porschan-web] http proxy listen for host [porschan.chanchifeng.com] location []</span><br><span class="line">2018/06/15 00:57:44 [I] [control.go:335] [720bc9bba0978b63] new proxy [porschan-web] success</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Tomcat的命令行启动：</span><br><span class="line"></span><br><span class="line">PS D:\Program Files\Tomcat\apache-tomcat-7.0.40-windows-x64\apache-tomcat-7.0.40\bin&gt; .\catalina.bat run</span><br><span class="line"></span><br><span class="line">访问仪表盘：http://chanchifeng.com:7500</span><br><span class="line"></span><br><span class="line">访问二级域名：http://porschan.chanchifeng.com:8080/</span><br></pre></td></tr></table></figure>
<h3 id="最后这里启动仅是命令行，还没把frp服务弄到服务器中，只要重启或者关闭xshell窗口就会关闭，这里我学习了，一定要看frp的作者的readme-md和下载下来的frpc-full-ini和frps-full-ini，里面都是宝藏，ini文件与旧版本有些不一样，要学好看文档和多多分析啊啊啊。后续中，我会在把它弄到服务中，敬请期待，哈哈哈哈。"><a href="#最后这里启动仅是命令行，还没把frp服务弄到服务器中，只要重启或者关闭xshell窗口就会关闭，这里我学习了，一定要看frp的作者的readme-md和下载下来的frpc-full-ini和frps-full-ini，里面都是宝藏，ini文件与旧版本有些不一样，要学好看文档和多多分析啊啊啊。后续中，我会在把它弄到服务中，敬请期待，哈哈哈哈。" class="headerlink" title="最后这里启动仅是命令行，还没把frp服务弄到服务器中，只要重启或者关闭xshell窗口就会关闭，这里我学习了，一定要看frp的作者的readme.md和下载下来的frpc_full.ini和frps_full.ini，里面都是宝藏，ini文件与旧版本有些不一样，要学好看文档和多多分析啊啊啊。后续中，我会在把它弄到服务中，敬请期待，哈哈哈哈。"></a>最后这里启动仅是命令行，还没把frp服务弄到服务器中，只要重启或者关闭xshell窗口就会关闭，这里我学习了，一定要看frp的作者的readme.md和下载下来的frpc_full.ini和frps_full.ini，里面都是宝藏，ini文件与旧版本有些不一样，要学好看文档和多多分析啊啊啊。后续中，我会在把它弄到服务中，敬请期待，哈哈哈哈。</h3></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-06-15</span><i class="fa fa-tag"></i><a class="tag" href="/tags/frp/" title="frp">frp </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/2018/06/15/frp/,chanchifeng,frp初使用,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/06/15/idea-springboot/" title="使用idea创建spring boot 项目">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/06/15/hexo-github/" title="使用hexo建立主题，并发布到github">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>