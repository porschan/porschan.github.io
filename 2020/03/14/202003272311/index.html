<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="porschan,710437653@qq.com"><title>Java - 枚举 · chanchifeng</title><meta name="description" content="为什么需要枚举常量定义它不香吗？为啥非得用枚举？
举个栗子，就以B站上传视频为例，视频一般有三个状态：草稿、审核和发布，我们可以将其定义为静态常量：
12345678public class VideoStatus &amp;#123;    public static final int Draft = "><meta name="keywords" content="Hexo,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title><a href="/">chanchifeng</a></h3><div class="description"><p>备案/许可证编号：粤ICP备17106855号，工信部网站（http://www.beian.miit.gov.cn）</p></div></div></div><ul class="social-links"><li><a href="http://github.com/porschan"><i class="fa fa-github"></i></a></li></ul><div class="footer"></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li><li><a href="/readme">引导</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Java - 枚举</a></h3></div><div class="post-content"><h3 id="为什么需要枚举"><a href="#为什么需要枚举" class="headerlink" title="为什么需要枚举"></a>为什么需要枚举</h3><p>常量定义它不香吗？为啥非得用枚举？</p>
<p>举个栗子，就以B站上传视频为例，视频一般有三个状态：草稿、审核和发布，我们可以将其定义为静态常量：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VideoStatus</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> Draft = <span class="number">1</span>; <span class="comment">//草稿</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> Review = <span class="number">2</span>; <span class="comment">//审核</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> Published = <span class="number">3</span>; <span class="comment">//发布</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于这种单值类型的静态常量定义，本身也没错，主要是在使用的地方没有一个明确性的约束而已，比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">judgeVideoStatus</span><span class="params">( <span class="keyword">int</span> status )</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比如这里的 judgeVideoStatus 函数的本意是传入 VideoStatus 的三种静态常量之一，但由于没有类型上的约束，因此传入任意一个int值都是可以的，编译器也不会提出任何警告。</p>
<p>但是在枚举类型出现之后，上面这种情况就可以用枚举严谨地去约束，比如用枚举去定义视频状态就非常简洁了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> VideoStatus &#123;</span><br><span class="line">    Draft, Review, Published</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而且主要是在用枚举的地方会有更强的类型约束：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 入参就有明确类型约束</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">judgeVideoStatus</span><span class="params">( VideoStatus status )</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样在使用 judgeVideoStatus 函数时，入参类型就会受到明确的类型约束，一旦传入无效值，编译器就会帮我们检查，从而规避潜在问题。</p>
<p>除此之外，枚举在扩展性方面比普常量更方便、也更优雅。</p>
<h3 id="重新系统认识一下枚举"><a href="#重新系统认识一下枚举" class="headerlink" title="重新系统认识一下枚举"></a>重新系统认识一下枚举</h3><p>还是拿前文《答应我，别再if/else走天下了可以吗》中的那个例子来说：比如，在后台管理系统中，肯定有用户角色一说，而且角色一般都是固定的，适合定义成一个枚举：</p>
<p>public enum UserRole {</p>
<pre><code>ROLE_ROOT_ADMIN,  // 系统管理员

ROLE_ORDER_ADMIN, // 订单管理员

ROLE_NORMAL       // 普通用户
</code></pre><p>}</p>
<p>接下来我们就用这个UserRole为例来说明枚举的所有基本用法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">UserRole role1 = UserRole.ROLE_ROOT_ADMIN;</span><br><span class="line">UserRole role2 = UserRole.ROLE_ORDER_ADMIN;</span><br><span class="line">UserRole role3 = UserRole.ROLE_NORMAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">// values()方法：返回所有枚举常量的数组集合</span></span><br><span class="line"><span class="keyword">for</span> ( UserRole role : UserRole.values() ) &#123;</span><br><span class="line">    System.out.println(role);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印：</span></span><br><span class="line"><span class="comment">// ROLE_ROOT_ADMIN</span></span><br><span class="line"><span class="comment">// ROLE_ORDER_ADMIN</span></span><br><span class="line"><span class="comment">// ROLE_NORMAL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ordinal()方法：返回枚举常量的序数，注意从0开始</span></span><br><span class="line">System.out.println( role1.ordinal() ); <span class="comment">// 打印0</span></span><br><span class="line">System.out.println( role2.ordinal() ); <span class="comment">// 打印1</span></span><br><span class="line">System.out.println( role3.ordinal() ); <span class="comment">// 打印2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// compareTo()方法：枚举常量间的比较</span></span><br><span class="line">System.out.println( role1.compareTo(role2) ); <span class="comment">//打印-1</span></span><br><span class="line">System.out.println( role2.compareTo(role3) ); <span class="comment">//打印-2</span></span><br><span class="line">System.out.println( role1.compareTo(role3) ); <span class="comment">//打印-2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// name()方法：获得枚举常量的名称</span></span><br><span class="line">System.out.println( role1.name() ); <span class="comment">// 打印ROLE_ROOT_ADMIN</span></span><br><span class="line">System.out.println( role2.name() ); <span class="comment">// 打印ROLE_ORDER_ADMIN</span></span><br><span class="line">System.out.println( role3.name() ); <span class="comment">// 打印ROLE_NORMAL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// valueOf()方法：返回指定名称的枚举常量</span></span><br><span class="line">System.out.println( UserRole.valueOf( <span class="string">"ROLE_ROOT_ADMIN"</span> ) );</span><br><span class="line">System.out.println( UserRole.valueOf( <span class="string">"ROLE_ORDER_ADMIN"</span> ) );</span><br><span class="line">System.out.println( UserRole.valueOf( <span class="string">"ROLE_NORMAL"</span> ) );</span><br></pre></td></tr></table></figure>
<p>除此之外，枚举还可以用于switch语句中，而且意义更加明确：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UserRole userRole = UserRole.ROLE_ORDER_ADMIN;</span><br><span class="line"><span class="keyword">switch</span> (userRole) &#123;</span><br><span class="line">    <span class="keyword">case</span> ROLE_ROOT_ADMIN:  <span class="comment">// 比如此处的意义就非常清晰了，比1，2，3这种数字好！</span></span><br><span class="line">        System.out.println(<span class="string">"这是系统管理员角色"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> ROLE_ORDER_ADMIN:</span><br><span class="line">        System.out.println(<span class="string">"这是订单管理员角色"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> ROLE_NORMAL:</span><br><span class="line">        System.out.println(<span class="string">"这是普通用户角色"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义扩充枚举"><a href="#自定义扩充枚举" class="headerlink" title="自定义扩充枚举"></a>自定义扩充枚举</h3><p>上面展示的枚举例子非常简单，仅仅是单值的情形，而实际项目中用枚举往往是多值用法。</p>
<p>比如，我想扩充一下上面的UserRole枚举，在里面加入 角色名 – 角色编码 的对应关系，这也是实际项目中常用的用法。</p>
<p>这时候我们可以在枚举里自定义各种属性、构造函数、甚至各种方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> UserRole &#123;</span><br><span class="line"></span><br><span class="line">    ROLE_ROOT_ADMIN( <span class="string">"系统管理员"</span>, <span class="number">000000</span> ),</span><br><span class="line">    ROLE_ORDER_ADMIN( <span class="string">"订单管理员"</span>, <span class="number">100000</span> ),</span><br><span class="line">    ROLE_NORMAL( <span class="string">"普通用户"</span>, <span class="number">200000</span> ),</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以下为自定义属性</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String roleName;  <span class="comment">//角色名称</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer roleCode; <span class="comment">//角色编码</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以下为自定义构造函数</span></span><br><span class="line">    </span><br><span class="line">    UserRole( String roleName, Integer roleCode ) &#123;</span><br><span class="line">        <span class="keyword">this</span>.roleName = roleName;</span><br><span class="line">        <span class="keyword">this</span>.roleCode = roleCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以下为自定义方法</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRoleName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.roleName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getRoleCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.roleCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">getRoleCodeByRoleName</span><span class="params">( String roleName )</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>( UserRole enums : UserRole.values() ) &#123;</span><br><span class="line">            <span class="keyword">if</span>( enums.getRoleName().equals( roleName ) ) &#123;</span><br><span class="line">                <span class="keyword">return</span> enums.getRoleCode();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上述代码可知，在enum枚举类中完全可以像在普通Class里一样声明属性、构造函数以及成员方法。</p>
<h3 id="枚举-接口"><a href="#枚举-接口" class="headerlink" title="枚举 + 接口 = ?"></a>枚举 + 接口 = ?</h3><p>比如在我的前文《答应我，别再if/else走天下了可以吗》中讲烦人的if/else消除时，就讲过如何通过让枚举去实现接口来方便的完成。</p>
<p>这地方不妨再回顾一遍：</p>
<p>什么角色能干什么事，这很明显有一个对应关系，所以我们首先定义一个公用的接口RoleOperation，表示不同角色所能做的操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RoleOperation</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">op</span><span class="params">()</span></span>;  <span class="comment">// 表示某个角色可以做哪些op操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来我们将不同角色的情况全部交由枚举类来做，定义一个枚举类RoleEnum，并让它去实现RoleOperation接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> RoleEnum implements RoleOperation &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 系统管理员(有A操作权限)</span></span><br><span class="line">    ROLE_ROOT_ADMIN &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">op</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"ROLE_ROOT_ADMIN:"</span> + <span class="string">" has AAA permission"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 订单管理员(有B操作权限)</span></span><br><span class="line">    ROLE_ORDER_ADMIN &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">op</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"ROLE_ORDER_ADMIN:"</span> + <span class="string">" has BBB permission"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 普通用户(有C操作权限)</span></span><br><span class="line">    ROLE_NORMAL &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">op</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"ROLE_NORMAL:"</span> + <span class="string">" has CCC permission"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，在调用处就变得异常简单了，一行代码就行了，根本不需要什么if/else：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JudgeRole</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">judge</span><span class="params">( String roleName )</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 一行代码搞定！之前的if/else灰飞烟灭</span></span><br><span class="line">        <span class="keyword">return</span> RoleEnum.valueOf(roleName).op();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>而且这样一来，以后假如我想扩充条件，只需要去枚举类中加代码即可，而不用改任何老代码，非常符合开闭原则！</p>
<h3 id="枚举与设计模式"><a href="#枚举与设计模式" class="headerlink" title="枚举与设计模式"></a>枚举与设计模式</h3><p>什么？枚举还能实现设计模式？</p>
<p>是的！不仅能而且还能实现好几种！</p>
<p>1、单例模式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数私有化，避免外部创建实例</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个内部枚举</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> SingletonEnum&#123;</span><br><span class="line"></span><br><span class="line">        SEED;  <span class="comment">// 唯一一个枚举对象，我们称它为“种子选手”！</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Singleton singleton;</span><br><span class="line"></span><br><span class="line">        SingletonEnum()&#123;</span><br><span class="line">            singleton = <span class="keyword">new</span> Singleton(); <span class="comment">//真正的对象创建隐蔽在此！</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Singleton <span class="title">getInstnce</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> singleton;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 故意外露的对象获取方法，也是外面获取实例的唯一入口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonEnum.SEED.getInstnce(); <span class="comment">// 通过枚举的种子选手来完成</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、策略模式</p>
<p>这个也比较好举例，比如用枚举就可以写出一个基于策略模式的加减乘除计算器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> Calculator &#123;</span><br><span class="line"></span><br><span class="line">        ADDITION &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Double <span class="title">execute</span><span class="params">( Double x, Double y )</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> x + y; <span class="comment">// 加法</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        SUBTRACTION &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Double <span class="title">execute</span><span class="params">( Double x, Double y )</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> x - y; <span class="comment">// 减法</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        MULTIPLICATION &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Double <span class="title">execute</span><span class="params">( Double x, Double y )</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> x * y; <span class="comment">// 乘法</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        DIVISION &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Double <span class="title">execute</span><span class="params">( Double x, Double y )</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> x/y;  <span class="comment">// 除法</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Double <span class="title">execute</span><span class="params">(Double x, Double y)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println( Calculator.ADDITION.execute( <span class="number">4.0</span>, <span class="number">2.0</span> ) );       </span><br><span class="line">        <span class="comment">// 打印 6.0</span></span><br><span class="line">        System.out.println( Calculator.SUBTRACTION.execute( <span class="number">4.0</span>, <span class="number">2.0</span> ) );    </span><br><span class="line">        <span class="comment">// 打印 2.0</span></span><br><span class="line">        System.out.println( Calculator.MULTIPLICATION.execute( <span class="number">4.0</span>, <span class="number">2.0</span> ) ); </span><br><span class="line">        <span class="comment">// 打印 8.0</span></span><br><span class="line">        System.out.println( Calculator.DIVISION.execute( <span class="number">4.0</span>, <span class="number">2.0</span> ) );       </span><br><span class="line">        <span class="comment">// 打印 2.0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>专门用于枚举的集合类</p>
<p>我们平常一般习惯于使用诸如：HashMap 和 HashSet等集合来盛放元素，而对于枚举，有它专门的集合类：EnumSet和EnumMap</p>
<p>1、EnumSet</p>
<p>EnumSet 是专门为盛放枚举类型所设计的 Set 类型。</p>
<p>还是举例来说，就以文中开头定义的角色枚举为例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> UserRole &#123;</span><br><span class="line"></span><br><span class="line">    ROLE_ROOT_ADMIN,  <span class="comment">// 系统管理员</span></span><br><span class="line"></span><br><span class="line">    ROLE_ORDER_ADMIN, <span class="comment">// 订单管理员</span></span><br><span class="line"></span><br><span class="line">    ROLE_NORMAL       <span class="comment">// 普通用户</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比如系统里来了一批人，我们需要查看他是不是某个角色中的一个：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个管理员角色的专属集合</span></span><br><span class="line">EnumSet&lt;UserRole&gt; userRolesForAdmin </span><br><span class="line">    = EnumSet.of( </span><br><span class="line">        UserRole.ROLE_ROOT_ADMIN,</span><br><span class="line">        UserRole.ROLE_ORDER_ADMIN </span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断某个进来的用户是不是管理员</span></span><br><span class="line"><span class="function">Boolean <span class="title">isAdmin</span><span class="params">( User user )</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>( userRoles.contains( user.getUserRole() ) )</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、EnumMap</p>
<p>同样，EnumMap 则是用来专门盛放枚举类型为key的 Map 类型。</p>
<p>比如，系统里来了一批人，我们需要统计不同的角色到底有多少人这种的话：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;UserRole,Integer&gt; userStatisticMap = <span class="keyword">new</span> EnumMap&lt;&gt;(UserRole.class);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ( User user : userList ) &#123;</span><br><span class="line">    Integer num = userStatisticMap.get( user.getUserRole() );</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">null</span> != num ) &#123;</span><br><span class="line">        userStatisticMap.put( user.getUserRole(), num+<span class="number">1</span> );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        userStatisticMap.put( user.getUserRole(), <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用EnumMap可以说非常方便了。</p>
<p>摘抄：<a href="https://segmentfault.com/a/1190000022040425?utm_source=weekly&amp;utm_medium=email&amp;utm_campaign=SegmentFault%20%E7%B2%BE%E9%80%89%E6%AF%8F%E5%91%A8%E7%B2%BE%E9%80%89%E4%B8%A8104%E9%81%93%20CSS%20%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%8C%E5%8A%A9%E4%BD%A0%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA" title="恕我直言，我怀疑你没怎么用过枚举" target="_blank" rel="noopener">恕我直言，我怀疑你没怎么用过枚举</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2020-03-14</span><i class="fa fa-tag"></i></div></div></div></div><div class="cc"><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a></div><div class="cc_tips">本作品采用<a href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可。
<span id="busuanzi_container_page_pv"></span>本文总阅读量：<span id="busuanzi_value_page_pv"></span></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2020/03/14/202003142239/" title="React - 使用技巧">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2020/03/14/202003252247/" title="Linux - 使用技巧">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/busuanzi/busuanzi.pure.mini.js"></script></body></html>